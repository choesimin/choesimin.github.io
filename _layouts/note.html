---
layout: default
additional_css:
  - /assets/css/note.css
additional_js:
  - /assets/js/typing-effect.js
---

<div id="progressBar"></div>

<h1 id="title">&nbsp;</h1>
<p id="date">&nbsp;</p>
<p id="description">&nbsp;</p>

<div id="content">
  <div id="index">
    <button type="button" onclick="toggleIndex()">Index</button>
    <ul></ul>
  </div>
  <article>{{ content }}</article>
</div>

<hr>

<div class="giscus"></div>

<!-- Load scripts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<script src="{{ '/assets/js/typing-effect.js' | relative_url }}"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/vs.min.css" />

<script>
  document.addEventListener('DOMContentLoaded', function() {
    hljs.highlightAll();
    renderMermaid();

    // Type text after typing-effect.js is definitely loaded
    const title = document.getElementById("title");
    const date = document.getElementById("date");
    const description = document.getElementById("description");
    type(title, "{{ page.title }}");
    type(date, '{{ page.date | date: "%Y년 %-m월 %e일" }}', 80);
    type(description, '{{ page.description }}', 10);
    
    const indexList = document.getElementById("index").getElementsByTagName("ul")[0];
    const indexButton = document.querySelector("#index > button");
  
    // Rest of the script...
    const headers = document.querySelectorAll("h2,h3,h4,h5,h6");
    for (let i = 0; i < headers.length; i++) {
      const header = headers[i];
  
      const anchor = document.createElement("a");
      anchor.innerHTML = header.innerText;
      anchor.href = "#" + header.id;
  
      const item = document.createElement("li");
      item.appendChild(anchor);
      item.style.marginLeft =
        (parseInt(header.tagName.replace("H", "")) - 2) * 15 + "px";
  
      indexList.appendChild(item);
  
      item.getElementsByTagName("a")[0].addEventListener("click", (e) => {
        toggleIndex();
      });
    }
  });

  function toggleIndex() {
    const indexList = document.getElementById("index").getElementsByTagName("ul")[0];
    if (indexList.style.display === "block") {
      indexList.style.display = "none";
    } else {
      indexList.style.display = "block";
    }
  }

  document.addEventListener('click', function(event) {
    const indexList = document.getElementById("index").getElementsByTagName("ul")[0];
    const indexButton = document.querySelector("#index > button");
    if (
      indexList.style.display === "block" && 
      !indexList.contains(event.target) && 
      event.target !== indexButton
    ) {
      indexList.style.display = "none";
    }
  });

  async function renderMermaid() {
    mermaid.initialize({
      theme: "neutral",
      startOnLoad: false,
      securityLevel: "loose",
    });
    await mermaid.run({ querySelector: ".language-mermaid" });
  }

  const progressBar = document.getElementById("progressBar");
  window.onscroll = function () {
    var winScroll = document.body.scrollTop || document.documentElement.scrollTop;
    var height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
    var scrolled = (winScroll / height) * 100;

    progressBar.style.width = scrolled + "%";
  };
</script>

{% include giscus.html %}

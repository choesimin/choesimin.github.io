---
layout: none
---

<!DOCTYPE html>
<html lang="ko">
  <head>
    {% include google-analytics.html %}
    <title>SIMIN</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="시민의 개인 블로그" />
    <link rel="canonical" href="{{ site.url }}{{ page.url }}" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/simple-jekyll-search/1.9.2/simple-jekyll-search.min.js" integrity="sha512-gABzh+zgo1Eh5HMdD2IMOjeaQAjl9v/MrA3xbZnMTRR5wC4x3WxurJo6yg5EWj1zfNz0qoXK/rKVP5Are0E4QQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <style>
      body {
        margin: 0;
        padding: 0;
        display: flex;
        min-height: 100vh;
      }

      header {
        position: fixed;
        top: 0;
        left: 0;
        z-index: 100;
        width: 100%;
      }

      /* Sidebar styling */
      .sidebar {
        width: 250px;
        padding: 20px;
        background-color: var(--sidebar-background, #f5f5f5);
        border-right: 1px solid var(--border-color, #e0e0e0);
        height: 100vh;
        position: fixed;
        overflow-y: auto;
        padding-top: 60px; /* Space for the header/logo */
      }

      /* Main content area */
      .main-content {
        margin-left: 290px; /* sidebar width + padding */
        padding: 20px;
        padding-top: 60px; /* Space for the header/logo */
        flex: 1;
      }

      /* Category styling */
      .category-container {
        margin-bottom: 20px;
      }
      
      .category-header {
        cursor: pointer;
        padding: 10px 0;
        border-bottom: 1px solid var(--border-color, #e0e0e0);
        font-weight: bold;
        font-size: 1.2em;
      }
      
      .count-display {
        margin-right: 10px;
        color: gray;
        font-size: 0.85em;
      }
      
      /* Toggle icon styling */
      .toggle-icon {
        display: inline-block;
        transition: transform 0.2s ease;
      }
      
      .toggle-icon.open {
        transform: rotate(180deg);
      }
      
      /* List styling for all categories */
      #notes ul, #algorithmList, #graphicList, #storyList {
        list-style: none;
        padding-left: 16px;
        margin-top: 8px;
      }
      
      #notes a, #algorithmList a, #graphicList a, #storyList a {
        text-decoration-line: none;
      }
      
      /* Search input styling */
      #noteSearch {
        margin: 10px 0;
      }
      
      #noteSearch input {
        padding: 5px 10px;
        width: 100%;
        background-color: var(--background-color, #fff);
        color: inherit;
        border: none;
        border-bottom: 1px solid var(--background-highlight-color, #ddd);
        transition: 0.3s;
      }
      
      #noteSearch input:focus {
        border-color: var(--border-color, #999);
        outline: none;
      }
      
      #searchResult {
        background-color: var(--background-color, #fff);
      }
      
      #searchResult li {
        list-style: none;
      }
      
      #searchResult li a {
        text-decoration: none;
      }

      /* Responsive design for mobile */
      @media (max-width: 768px) {
        body {
          flex-direction: column;
        }
        
        .sidebar {
          width: 100%;
          height: auto;
          position: relative;
          padding-top: 50px;
        }
        
        .main-content {
          margin-left: 0;
          padding-top: 20px;
        }
      }
    </style>
  </head>

  <body>
    <div class="sidebar">
      <section id="categories">
        <div class="category-container">
          <div class="category-header">
            <span style="display: inline-block">Note</span>
            <span style="float: right">
              <span class="count-display" id="noteCount"></span>
              <span style="color: blue; cursor: pointer; font-size: 0.8em;" class="category-toggle" data-target="notes">
                <span class="toggle-icon">▾</span>
              </span>
            </span>
          </div>
          <div id="noteSearch" style="display: none;">
            <input type="text" placeholder="title, url" />
            <div id="searchResult"></div>
          </div>
          <article id="notes" style="display: none;"></article>
        </div>

        <div class="category-container">
          <div class="category-header">
            <span style="display: inline-block">Algorithm</span>
            <span style="float: right">
              <span class="count-display" id="algorithmCount"></span>
              <span style="color: blue; cursor: pointer; font-size: 0.8em;" class="category-toggle" data-target="algorithmList">
                <span class="toggle-icon">▾</span>
              </span>
            </span>
          </div>
          <ul id="algorithmList" style="display: none; list-style: none; padding-left: 16px;">
            {% for problem in site.problems %}
            <li>
              <a href="{{ problem.url | relative_url }}">
                {{ problem.category | capitalize }}
                <b>{{ problem.title }}</b>
                <small>({{ problem.tags }})</small>
              </a>
            </li>
            {% endfor %}
          </ul>
        </div>

        <div class="category-container">
          <div class="category-header">
            <span style="display: inline-block">Graphic</span>
            <span style="float: right">
              <span class="count-display" id="graphicCount"></span>
              <span style="color: blue; cursor: pointer; font-size: 0.8em;" class="category-toggle" data-target="graphicList">
                <span class="toggle-icon">▾</span>
              </span>
            </span>
          </div>
          <ul id="graphicList" style="display: none; list-style: none; padding-left: 16px;">
            {% for graphic in site.graphics %}
            <li>
              <a href="{{ graphic.url | relative_url }}">
                <b>{{ graphic.title }}</b>
                <p>{{ graphic.description }}</p>
              </a>
            </li>
            {% endfor %}
          </ul>
        </div>

        <div class="category-container">
          <div class="category-header">
        <div class="category-container">
          <div class="category-header">
            <span style="display: inline-block">Story</span>
            <span style="float: right">
              <span class="count-display" id="storyCount"></span>
              <span style="color: blue; cursor: pointer; font-size: 0.8em;" class="category-toggle" data-target="storyList">
                <span class="toggle-icon">▾</span>
              </span>
            </span>
          </div>
          <ul id="storyList" style="display: none; list-style: none; padding-left: 16px;">
            <li>
              <a href="https://brunch.co.kr/@simin" target="_blank">
                <b>Brunch Story</b>
              </a>
            </li>
            <li>
              <a href="https://www.instagram.com/simin_sees" target="_blank">
                <b>Instagram</b>
              </a>
            </li>
          </ul>
        </div>
      </section>
    </div>
    <div class="main-content">
      <main>
        <!-- Main content goes here -->
      </main>
    </div>

    {% include footer.html %}
    <script>
      // Initialize Simple Jekyll Search
      SimpleJekyllSearch({
        searchInput: document.querySelector('#noteSearch input'),
        resultsContainer: document.getElementById('searchResult'),
        json: '/assets/json/note-search.json',
        searchResultTemplate: `<li><a href="{{ site.url }}{url}">{title}</a></li>`
      });

      // Set up note tree
      var pages = getPages();
      var nodes = makeNodes(pages);
      var root = groupNodes(nodes);

      var list = document.createElement("ul");
      list.className = "root";
      
      if (root.children && root.children.length > 0) {
        for (var i = 0; i < root.children.length; i++) {
          makeList(root.children[i], list);
        }
      }
      
      document.getElementById("notes").appendChild(list);

      // Count items in each category
      function updateCounts() {
        // Count notes
        var notesCount = countAllDescendants(root);
        document.getElementById("noteCount").textContent = "(" + notesCount + ")";
        
        // Count algorithms
        var algorithmsCount = document.querySelectorAll('#algorithmList li').length;
        document.getElementById("algorithmCount").textContent = "(" + algorithmsCount + ")";
        
        // Count graphics
        var graphicsCount = document.querySelectorAll('#graphicList li').length;
        document.getElementById("graphicCount").textContent = "(" + graphicsCount + ")";
        
        // Count stories (fixed at 2 for Brunch and Instagram)
        document.getElementById("storyCount").textContent = "(2)";
      }
      
      // Add category toggle functionality
      document.querySelectorAll('.category-toggle').forEach(function(toggle) {
        toggle.addEventListener('click', function(e) {
          e.stopPropagation();
          var targetId = this.getAttribute('data-target');
          var targetElement = document.getElementById(targetId);
          var icon = this.querySelector('.toggle-icon');
          
          // Handle note search display for "Note" category
          if (targetId === 'notes') {
            var searchElement = document.getElementById('noteSearch');
            if (targetElement.style.display === 'none') {
              searchElement.style.display = 'block';
              targetElement.style.display = 'block';
              icon.classList.add('open');
            } else {
              searchElement.style.display = 'none';
              targetElement.style.display = 'none';
              icon.classList.remove('open');
            }
          } else {
            if (targetElement.style.display === 'none') {
              targetElement.style.display = 'block';
              icon.classList.add('open');
            } else {
              targetElement.style.display = 'none';
              icon.classList.remove('open');
            }
          }
        });
        
        // Make the whole header clickable
        var header = toggle.closest('.category-header');
        header.addEventListener('click', function(e) {
          // Only trigger if the click wasn't on the toggle itself
          if (!e.target.closest('.category-toggle')) {
            toggle.click();
          }
        });
      });

      // Call updateCounts after the page loads
      window.addEventListener('load', updateCounts);
      
      // The rest of your existing functions remain unchanged
      function makeList(node, list) {
        var listItem = document.createElement("li");
        
        if (node.children != undefined) {
          var index = node.children.filter(child => child.isIndex)[0];
          node.children = node.children.filter(child => !child.isIndex);
      
          // Create the main content container (left side)
          var contentContainer = document.createElement("span");
          contentContainer.style.display = "inline-block";
          
          if (index != undefined) {
            listItem.id = index.category.join('-');
      
            var anchor = document.createElement("a");
            anchor.textContent = index.name;
            anchor.href = index.url;
            contentContainer.appendChild(anchor);
      
            var small = document.createElement("small");
            small.textContent = index.date;
            contentContainer.appendChild(small);
          } else {
            contentContainer.textContent = node.name;
          }
          
          listItem.appendChild(contentContainer);
          
          // Create the right-aligned container for count and toggle
          var rightContainer = document.createElement("span");
          rightContainer.style.float = "right";
          rightContainer.style.display = "inline-block";
          
          // Calculate total count of all descendant documents
          var totalDescendants = countAllDescendants(node);
          
          var childCount = document.createElement("span");
          childCount.textContent = `(${totalDescendants})`;
          childCount.style.marginRight = "10px";
          childCount.style.color = "gray";
          rightContainer.appendChild(childCount);
          
          // Only add toggle text if node has children
          if (node.children && node.children.length > 0) {
            var toggleText = document.createElement("span");
            
            // Create toggle icon element
            var toggleIcon = document.createElement("span");
            toggleIcon.className = "toggle-icon";
            toggleIcon.textContent = "▾";
            
            toggleText.appendChild(toggleIcon);
            toggleText.style.color = "blue";
            toggleText.style.cursor = "pointer";
            toggleText.style.fontSize = "0.8em";
            rightContainer.appendChild(toggleText);
          }
          
          listItem.appendChild(rightContainer);
          list.appendChild(listItem);
      
          if (node.children.length > 0) {
            var childList = document.createElement("ul");
            childList.style.display = "none";
            for (var i = 0; i < node.children.length; i++) {
              makeList(node.children[i], childList);
            }
            listItem.appendChild(childList);
      
            // Update event handling - only toggle on the toggleText element
            toggleText.addEventListener("click", function (e) {
              e.stopPropagation(); // Prevent event from bubbling up
              if (childList.style.display === "none") {
                childList.style.display = "block";
                toggleText.querySelector('.toggle-icon').classList.add('open');
              } else {
                childList.style.display = "none";
                toggleText.querySelector('.toggle-icon').classList.remove('open');
              }
            });
            
            // Remove the click event from the whole list item
            listItem.removeEventListener("click", function(){});
            
            // Add navigation to the content container if it has a link
            if (index != undefined) {
              contentContainer.addEventListener("click", function(e) {
                e.stopPropagation();
                window.location.href = index.url;
              });
            }
          }
        } else {
          // For leaf nodes, no toggle or count
          var anchor = document.createElement("a");
          anchor.textContent = node.name;
          anchor.href = node.url;
          listItem.appendChild(anchor);
      
          var sup = document.createElement("sup");
          sup.textContent = node.date;
          listItem.appendChild(sup);
          list.appendChild(listItem);
        }
      }

      // Add this new function to count all descendants
      function countAllDescendants(node) {
        if (!node.children) {
          return 1; // Leaf node counts as 1
        }
        
        let count = 0;
        for (let child of node.children) {
          if (child.children) {
            // For nodes with children, recursively count their descendants
            count += countAllDescendants(child);
          } else {
            // For leaf nodes, add 1
            count += 1;
          }
        }
        
        return count;
      }

      function groupNodes(nodes) {
        var root = { name: "root" };
        root.children = nodes;

        return groupNode(root);
      }

      function groupNode(node) {
        var categories = Array.from(new Set(node.children.filter(child => child.children != undefined).map(child => child.name)));

        for (var i = 0; i < categories.length; i++) {
          var category = categories[i];
          var groupedNode = {
            name: category,
            children: node.children.filter(child => child.name === category).map(child => child.children).flat(Infinity)
          };

          node.children = node.children.filter(child => child.name != category);
          node.children.push(groupedNode);

          if (groupedNode.children != undefined) {
            groupNode(groupedNode);
          }
        }

        return node;
      }


      function makeNodes(pages) {
        var nodes = pages.map(page => makeNode(page));
        return nodes;
      }

      function makeNode(page) {
        var leaf = {
          name: page.title,
          date: page.date,
          url: page.url,
          category: page.category,
          isIndex: page.name === "index"
        }
        return makeMultiDepthNode(page.category, leaf, 1);
      }

      function makeMultiDepthNode(category, child, indent) {
        var node = {
          name: category[category.length - indent],
          children: [child]
        };

        while (indent < category.length) {
          indent++;
          return makeMultiDepthNode(category, node, indent);
        }

        return node;
      }

      function getPages() {
        var pages = [];

        {% for notes in site.notes %}
        var path = "{{ notes.path }}".replace("_notes/", "").split("/");

        pages.push({
          category: path.slice(0, path.length - 1),
          name: path[path.length - 1].replace(".md", ""),
          title: "{{ notes.title }}",
          date: "{{ notes.date | date: '%Y-%m-%d' }}",
          url: "{{ notes.url | relative_url }}",
        });
        {% endfor %}

        return pages;
      }
    </script>
  </body>
</html>

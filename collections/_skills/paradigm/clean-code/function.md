---
layout: skill
permalink: /52
title: Clean Code - 좋은 함수 만들기
description: 함수는 한 가지만 해야 합니다.
date: 2023-04-20
---


## 좋은 함수를 만드는 방법

- 좋은 함수는 한 가지만 하는, 작고, 잘 이름 붙여진 함수입니다.


### 작게 만들기

- 하나의 함수는 하나의 이야기만 표현해야 합니다.


### 들여쓰기 수준을 낮게 유지하기

- 함수의 들여쓰기 수준은 1단이나 2단을 넘어서면 안 됩니다.
    - 중첩 구조가 생길만큼 함수가 커져서는 안 됩니다.

- `if-else`, `while` 문 등에 들어가는 block은 한 줄이어야 합니다.
    - block에 한 줄만 들어가면, 바깥을 감싸는 함수(enclosing function)가 작아집니다.
    - block 안에서 호출하는 함수 이름을 적절히 짓는다면, code를 이해하기 쉬워집니다.


### 한 가지만 하기

```txt
함수는 한 가지를 해야 한다. 그 한 가지를 잘 해야 한다. 그 한 가지만을 해야 한다.
```

- 함수가 한 가지만 하는지 판단할 수 있습니다.
    - 한 함수 안(같은 추상화 수준)에서 logic을 추상화하여 한 단계만 수행하는 지 확인합니다.
    - 다른 표현이 아니라 의미 있는 이름으로 다른 함수를 추출할 수 있는지 확인합니다.
        - 한 가지 작업만 하는 함수는 section으로 나누기 어렵기 때문입니다.


### 함수의 추상화 수준을 맞추기

- code는 위에서 아래로 이야기처럼 읽히는 것이 좋습니다.
- 따라서 함수 당 추상화 수준은 하나여야 합니다.
- 함수가 확실히 한 가지 작업만 하려면, 함수 내 모든 문장의 추상화 수준이 동일해야 합니다.
- 한 함수 내에 여러 추상화 수준을 섞으면 code를 읽는 사람이 헷갈리게 됩니다.
    - 특정 표현이 근본 개념인지 세부사항인지 구분하기 어렵게 되기 때문입니다.


### `switch` 문 숨기기

- `switch` 문은 작게 만들기 어렵습니다.
    - `switch` 문은 본질적으로 여러 가지를 처리하도록 만들어졌기 때문입니다.
    - 분기가 많은 `if-else` 문도 `switch` 문과 같은 특징을 가집니다.

- `switch` 문은 단일 책임 원칙(SRP, Single Responsibility Principle)을 위반합니다.
    - code를 변경할 이유가 여러 개이기 때문입니다.
- `switch` 문은 개방-폐쇄 원칙(OCP, Open Closed Principle)을 위반하게 합니다.
    - 새로운 case를 추가할 때마다 code를 변경해야 하기 때문입니다.

- `switch` 문을 완전히 피할 방법은 없기 때문에, 각 `switch` 문을 저차원 class에 숨기고 반복하지 않는 방식을 사용합니다.
    - 숨긴 후에는 다른 code에 노출시키지 않습니다.


### 서술적인 이름 사용하기

```txt
code를 읽으면서 짐작했던 기능을 각 routine이 그대로 수행한다면, clean code다.
```

- 함수가 작고 단순할수록 서술적인 이름을 고르기 쉬워집니다.
- 이름이 길어도 괜찮습니다.
    - '길고 서술적인 이름'이 '짧고 어려운 이름'보다 좋습니다.
    - '길고 서술적인 이름'이 '길고 서술적인 주석'보다 좋습니다.
- 서술적인 이름을 사용하면 설계가 뚜렷해지므로 code 개선이 쉬워집니다.
- 일관성 있는 이름을 붙여야 합니다.
    - module 내에서 함수 이름은 같은 문구, 명사, 동사를 사용합니다.
        - 예를 들어, `includeSetupAndTeardownPages`, `includeSetupPages`, `includeSuiteSetupPage`, `includeSetupPage`, ...


### 인수를 적게 유지하기

| 함수 | 인수 |
| 
---
layout: skill
date: 2023-04-19
title: Clean Code - 읽기 좋은 Code Formatting
description: 일관된 code format을 통해 가독성을 높이면, 유지 보수성과 확장성도 함께 높일 수 있습니다.
---


## Code Formatting

- code 형식은 의사소통의 일부입니다.

- code의 가독성은 앞으로 바뀔 code에 대한 품질에 영향을 줍니다.
    - 처음에 정해지는 구현 style과 가독성 수준은 유지 보수 용이성과 확장성에 계속 영향을 미치게 됩니다.
    - 원래의 code는 사라지더라도 개발자의 style과 규율은 사라지지 않기 때문입니다.


---


## 적절한 행 길이 유지하기

- 일반적으로 큰 file보다 작은 file이 이해하기 쉽습니다.
    - 한 file이 200줄을 넘지 않는 것이 좋습니다.


### 신문 기사처럼 작성하기

| 신문 기사 | 설명 |
| --- | --- |
| 표제 | 기사를 몇 마디로 요약합니다. |
| 첫 문단 | 전체 기사 내용을 요약합니다. |
| 아래로 내려갈수록 | 세세한 사실(날짜, 이름, 발언, 주장, 기타 세부사항)을 기술합니다. |

| Source File | 설명 |
| --- | --- |
| 이름 | 간단하고 설명이 가능해야 합니다. |
| source file 첫 부분 | 고차원 개념과 algorithm에 대해 설명합니다. |
| 아래로 내려갈수록 | 의도에 대해 세세히 묘사합니다. |
| 마지막 | 가장 저차원 함수와 세부 내역을 기술합니다. |


### 개념은 빈 행으로 분리하기

- 빈 행은 새로운 개념을 시작한다는 시각적 단서가 됩니다.


### 세로 밀집도

- 세로 밀집도는 개념 연관성을 의미합니다.
    - 개념을 분리하는 줄바꿈과 반대 역할을 합니다.
- 서로 밀접한 code 행은 세로로 가까이 놓아야 합니다.


### 수직 거리

- 서로 밀접한 개념은 세로로 가까워야 합니다.
- 같은 file에 속할 정도로 밀접한 두 개념은 세로 거리로 연관성을 표현해야 합니다.
    - 연관성 : 한 개념을 이해하는 데에 다른 개념이 중요한 정도.


### 변수 선언

- 변수는 사용하는 위치에 최대한 가까이 선언합니다.


### Instance 변수

- class 제일 처음에 선언합니다.
- 변수 간에 세로로 거리를 두지 않습니다.
    - 잘 설계한 class는 class의 많은 method가 instance 변수를 사용하기 때문입니다.


### 종속 함수

- 한 함수가 다른 함수를 호출한다면 두 함수는 세로로 가까이 배치합니다.
    - 이는 program이 자연스럽게 읽힐 수 있게 합니다.


### 개념적 유사성

- 개념적인 친화도가 높을수록 code를 가까이 배치합니다.
- 친화도는 함수와 함수 사이, 함수와 변수 사이에 생깁니다.
    - 함수와 함수 사이 : 한 함수가 다른 함수를 호출해 생기는 종속성.
    - 함수와 변수 사이 : 변수와 그 변수를 사용하는 함수 간의 종속성.

- 종속적인 관계가 없더라도 개념적으로 유사하다면 가까이 배치할 수도 있습니다.


### 세로 순서

- 호출되는 함수를 호출하는 함수보다 나중에 배치합니다.
    - source code module이 고차원에서 저차원으로 자연스레 내려가게 됩니다.


---


## 가로 형식 맞추기

- code의 가로 길이는 한 화면에 들어가야 합니다.


### 짧은 행을 유지하기

- 120자 이하로 행 길이를 제한합니다.


### 가로 공백과 밀집도

- 가로 공백은 밀집된 code를 풀어줍니다.

#### 가로 공백을 사용해 밀접한 개념과 느슨한 개념을 표현하기

```java
// 할당문의 왼쪽 요소와 오른쪽 요소를 분명히 나누기 위해 공백을 넣습니다.
int lineSize = line.length();
totalChars += lineSize;
```

```java
// 함수와 인수는 관계가 밀접하기 때문에 함수 이름과 이어지는 괄호 사이에는 공백을 넣지 않습니다.
lineWidthHistogram.addLine(lineSize, lineCount);
recordWidestLine(lineSize);
```

#### 연산자 우선순위를 강조하기

```java
(-b + Math.sqrt(determinant)) / (2*a)
b*b - 4*a*c
```


### 가로 정렬 사용하지 않기

- "가로 정렬"이란 여러 변수를 선언할 때 길이가 다른 변수명들의 할당 영역 시작 위치를 맞추는 것입니다.
- code가 엉뚱한 부분을 강조해 진짜 의도를 가립니다.
- 정렬이 필요할 정도로 목록이 길다면 목록 길이에 문제가 있다는 뜻입니다.


### 들여쓰기

- 범위(scope)로 이뤄진 계층을 표현하기 위해 code를 들여씁니다.
- 좌측으로 code를 맞춰 code가 속하는 범위를 시각적으로 표현합니다.
- 일관된 들여쓰기는 code를 이해하기 쉽게 만듭니다.


### 들여쓰기를 무시할 수 있는 경우에도 들여쓰기

- 간단한 if 문, 짧은 while 문, 짧은 함수에서 괄호와 들여쓰기를 생략할 수 있지만, 그대로 들여쓰기를 하는 것이 좋습니다.
- 범위를 제대로 표시하는 것이 더 중요합니다.


---


## Team 규칙

- team은 한 가지 규칙에 합의해야 하며, 모든 구성원은 그 규칙에 따라야 합니다.

- 좋은 software system은 일관적입니다.
    - 한 source file에서 봤던 형식이 다른 source file에도 쓰이리라는 신뢰감을 독자에게 줄 수 있어야 합니다.


---


## Reference

- Clean Code (도서) - Robert C. Martin
